<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Summary Test - Chrome Extension</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
        }
        .test-section {
            margin: 20px 0;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 8px;
        }
        .test-text {
            background: #f5f5f5;
            padding: 15px;
            border-radius: 5px;
            margin: 10px 0;
            cursor: pointer;
            user-select: text;
        }
        .test-text:hover {
            background: #e8e8e8;
        }
        .instructions {
            background: #e3f2fd;
            padding: 15px;
            border-radius: 5px;
            border-left: 4px solid #2196f3;
        }
        .warning {
            background: #fff3e0;
            padding: 15px;
            border-radius: 5px;
            border-left: 4px solid #ff9800;
        }
        button {
            background: #2196f3;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover {
            background: #1976d2;
        }
        button:disabled {
            background: #ccc;
            cursor: not-allowed;
        }
    </style>
</head>
<body>
    <h1>ü§ñ AI Summary Test - Chrome Extension</h1>
    
    <div class="instructions">
        <h3>üìã Instructions:</h3>
        <ol>
            <li>Make sure your AI Note Chrome extension is installed and enabled</li>
            <li>Select any text below by clicking and dragging</li>
            <li>The floating button should appear with "Summarize" and "Create Note" options</li>
            <li>Click "Summarize" to test the AI summary functionality</li>
            <li>Check the extension popup to see the generated summary</li>
        </ol>
    </div>

    <div class="warning">
        <h3>‚ö†Ô∏è Important Notes:</h3>
        <ul>
            <li>The extension popup must be open to receive the summary modal</li>
            <li>If AI model fails to load, it will use fallback summarization</li>
            <li>Make sure you have internet connection for the AI model to load</li>
        </ul>
    </div>

    <div class="test-section">
        <h3>üß™ Test Text 1: Short Article</h3>
        <div class="test-text">
            Artificial intelligence (AI) is transforming the way we live and work. From virtual assistants like Siri and Alexa to recommendation systems on Netflix and Amazon, AI is becoming increasingly integrated into our daily lives. Machine learning algorithms can now recognize patterns in data that humans might miss, leading to breakthroughs in fields like medicine, finance, and transportation. However, as AI becomes more sophisticated, questions arise about privacy, job displacement, and the ethical implications of autonomous decision-making systems.
        </div>
    </div>

    <div class="test-section">
        <h3>üß™ Test Text 2: Technical Content</h3>
        <div class="test-text">
            The Chrome Extension Manifest V3 introduces significant changes to how extensions work. Service workers replace background pages, providing better performance and security. Content scripts now have more restricted access to web pages, and the messaging system has been improved for better communication between different parts of the extension. These changes make extensions more secure and efficient, but they also require developers to adapt their code to the new architecture.
        </div>
    </div>

    <div class="test-section">
        <h3>üß™ Test Text 3: Long Text</h3>
        <div class="test-text">
            Climate change represents one of the most pressing challenges facing humanity in the 21st century. The scientific consensus is clear: human activities, particularly the burning of fossil fuels and deforestation, are driving unprecedented changes in Earth's climate system. Rising global temperatures are causing sea levels to rise, extreme weather events to become more frequent and intense, and ecosystems to shift or collapse. The impacts are already being felt around the world, from melting glaciers in the Arctic to devastating wildfires in Australia and California. Addressing climate change requires immediate and coordinated action at local, national, and international levels. This includes transitioning to renewable energy sources, improving energy efficiency, protecting and restoring forests, and developing new technologies for carbon capture and storage. The transition to a low-carbon economy presents both challenges and opportunities, requiring innovation in technology, policy, and business models. While the task ahead is daunting, there are signs of progress, with many countries, cities, and companies committing to carbon neutrality and renewable energy targets. The next decade will be crucial in determining whether we can limit global warming to manageable levels and avoid the most catastrophic impacts of climate change.
        </div>
    </div>

    <div class="test-section">
        <h3>üîß Manual Test Controls</h3>
        <p>Use these buttons to manually test extension functionality:</p>
        <button onclick="testExtensionConnection()">Test Extension Connection</button>
        <button onclick="testDatabase()">Test Database</button>
        <button onclick="testONNXStatus()">Test ONNX Status</button>
        <button onclick="clearTestData()">Clear Test Data</button>
    </div>

    <div class="test-section">
        <h3>üìä Test Results</h3>
        <div id="testResults">
            <p>Test results will appear here...</p>
        </div>
    </div>

    <script>
        // Test functions
        async function testExtensionConnection() {
            try {
                const response = await chrome.runtime.sendMessage({ type: 'TEST_DATABASE' });
                document.getElementById('testResults').innerHTML = `
                    <div style="background: #e8f5e8; padding: 10px; border-radius: 5px; margin: 10px 0;">
                        <strong>‚úÖ Extension Connection Test:</strong><br>
                        Success: ${response.success}<br>
                        Message: ${response.message || 'N/A'}<br>
                        Stats: ${response.stats ? `Notes: ${response.stats.notes}, Flashcards: ${response.stats.flashcards}` : 'N/A'}
                    </div>
                `;
            } catch (error) {
                document.getElementById('testResults').innerHTML = `
                    <div style="background: #ffebee; padding: 10px; border-radius: 5px; margin: 10px 0;">
                        <strong>‚ùå Extension Connection Test Failed:</strong><br>
                        Error: ${error.message}
                    </div>
                `;
            }
        }

        async function testDatabase() {
            try {
                const response = await chrome.runtime.sendMessage({ type: 'TEST_DATABASE' });
                document.getElementById('testResults').innerHTML = `
                    <div style="background: #e8f5e8; padding: 10px; border-radius: 5px; margin: 10px 0;">
                        <strong>‚úÖ Database Test:</strong><br>
                        Success: ${response.success}<br>
                        Message: ${response.message || 'N/A'}<br>
                        Stats: ${response.stats ? `Notes: ${response.stats.notes}, Flashcards: ${response.stats.flashcards}` : 'N/A'}
                    </div>
                `;
            } catch (error) {
                document.getElementById('testResults').innerHTML = `
                    <div style="background: #ffebee; padding: 10px; border-radius: 5px; margin: 10px 0;">
                        <strong>‚ùå Database Test Failed:</strong><br>
                        Error: ${error.message}
                    </div>
                `;
            }
        }

        async function testONNXStatus() {
            try {
                const response = await chrome.runtime.sendMessage({ type: 'GET_ONNX_STATUS' });
                document.getElementById('testResults').innerHTML = `
                    <div style="background: #e8f5e8; padding: 10px; border-radius: 5px; margin: 10px 0;">
                        <strong>‚úÖ ONNX Status Test:</strong><br>
                        Success: ${response.success}<br>
                        Status: ${response.status || 'N/A'}<br>
                        Available: ${response.available ? 'Yes' : 'No'}
                    </div>
                `;
            } catch (error) {
                document.getElementById('testResults').innerHTML = `
                    <div style="background: #ffebee; padding: 10px; border-radius: 5px; margin: 10px 0;">
                        <strong>‚ùå ONNX Status Test Failed:</strong><br>
                        Error: ${error.message}
                    </div>
                `;
            }
        }

        async function clearTestData() {
            try {
                const response = await chrome.runtime.sendMessage({ type: 'RESET_DATABASE' });
                document.getElementById('testResults').innerHTML = `
                    <div style="background: #e8f5e8; padding: 10px; border-radius: 5px; margin: 10px 0;">
                        <strong>‚úÖ Database Reset:</strong><br>
                        Success: ${response.success}<br>
                        Message: ${response.message || 'N/A'}
                    </div>
                `;
            } catch (error) {
                document.getElementById('testResults').innerHTML = `
                    <div style="background: #ffebee; padding: 10px; border-radius: 5px; margin: 10px 0;">
                        <strong>‚ùå Database Reset Failed:</strong><br>
                        Error: ${error.message}
                    </div>
                `;
            }
        }

        // Auto-test extension connection when page loads
        window.addEventListener('load', () => {
            setTimeout(() => {
                testExtensionConnection();
            }, 1000);
        });
    </script>
</body>
</html>
